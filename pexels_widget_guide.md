# Pexels 视频搜索 Widget 使用指南

## 📖 概述

这是一个基于 Pexels API 的 ForwardWidget 组件，能够搜索和获取 Pexels 平台的高质量免费视频。支持热门视频、关键词搜索和随机视频获取功能。

## 🔑 获取 Pexels API 密钥

### 1. 注册 Pexels 账户
1. 访问 [Pexels 官网](https://www.pexels.com)
2. 点击右上角 "Join" 注册账户
3. 完成邮箱验证

### 2. 申请 API 密钥
1. 登录后访问 [Pexels API 页面](https://www.pexels.com/api/)
2. 点击 "Get Started" 或 "Request Access"
3. 填写应用信息：
   - **Application Name**: 填写您的应用名称
   - **Application Description**: 简单描述用途
   - **Application URL**: 可以填写个人网站或项目地址
4. 提交申请，通常几分钟内会收到 API 密钥

### 3. 获取 API 密钥
- 审核通过后，在 [API 仪表板](https://www.pexels.com/api/documentation/) 页面可以看到您的 API 密钥
- API 密钥格式类似：`YOUR_API_KEY_HERE`

## 🚀 组件功能

### 1. 热门视频模块
- **功能**: 获取 Pexels 平台当前热门的视频
- **特点**: 
  - 支持分页浏览
  - 可设置最小分辨率过滤
  - 自动缓存 1 小时
- **适用场景**: 获取高质量的热门素材

### 2. 搜索视频模块
- **功能**: 根据关键词搜索特定类型的视频
- **特点**:
  - 支持多种搜索参数
  - 可设置视频方向（横向/纵向/正方形）
  - 可选择视频尺寸偏好
- **适用场景**: 查找特定主题的视频素材

### 3. 随机视频模块
- **功能**: 获取随机的高质量视频
- **特点**:
  - 支持分类别随机获取
  - 智能随机算法
  - 结果自动打乱
- **适用场景**: 发现新的创意素材

## 🛠️ 参数配置说明

### 通用参数

#### API 密钥 (api_key)
- **类型**: 文本输入
- **必填**: 是
- **说明**: 从 Pexels 获取的 API 密钥
- **示例**: `YOUR_PEXELS_API_KEY`

#### 每页数量 (per_page)
- **类型**: 枚举选择
- **选项**: 10, 15, 20, 30
- **默认**: 15
- **说明**: 每次请求返回的视频数量

#### 页码 (page)
- **类型**: 页码选择器
- **默认**: 1
- **说明**: 用于分页浏览结果

### 搜索视频专用参数

#### 搜索关键词 (query)
- **类型**: 文本输入
- **默认**: "nature"
- **说明**: 搜索的关键词，支持英文
- **示例**: "ocean", "mountain", "city lights"

#### 视频方向 (orientation)
- **类型**: 枚举选择
- **选项**: 
  - `all`: 所有方向
  - `landscape`: 横向 (16:9)
  - `portrait`: 纵向 (9:16)
  - `square`: 正方形 (1:1)

#### 视频尺寸 (size)
- **类型**: 枚举选择
- **选项**:
  - `all`: 所有尺寸
  - `large`: 大尺寸 (高分辨率)
  - `medium`: 中等尺寸
  - `small`: 小尺寸

### 随机视频专用参数

#### 视频类别 (category)
- **类型**: 枚举选择
- **选项**: 自然风光、海洋、山川、城市、天空、森林、动物、科技、抽象
- **默认**: 所有类别

#### 视频数量 (count)
- **类型**: 数量计数器
- **默认**: 10
- **说明**: 获取随机视频的数量

## 📊 返回数据格式

每个视频项目包含以下信息：

```javascript
{
    id: "pexels_12345",                    // 唯一标识
    type: "video",                         // 类型
    title: "Pexels 视频 #12345",           // 标题
    description: "由 [作者名] 提供的高质量视频", // 描述
    posterPath: "封面图片URL",             // 视频封面
    videoUrl: "高质量视频URL",             // 主视频地址
    previewUrl: "预览视频URL",             // 预览视频地址
    duration: 30,                          // 时长（秒）
    durationText: "00:30",                 // 格式化时长
    rating: "4.5",                         // 评分
    genreTitle: "视频素材",                // 分类
    mediaType: "video",                    // 媒体类型
    link: "Pexels页面URL",                 // 原始页面链接
    videoFiles: [                          // 多种质量的视频文件
        {
            url: "视频URL",
            quality: "hd",
            width: 1920,
            height: 1080,
            fileType: "video/mp4"
        }
    ]
}
```

## 💡 使用技巧

### 1. API 密钥管理
- 将 API 密钥保存在安全的地方
- 不要在公开代码中硬编码 API 密钥
- 定期检查 API 使用情况

### 2. 搜索优化
- 使用英文关键词搜索效果更好
- 组合关键词可以获得更精确的结果
- 例如："ocean waves", "city night", "mountain sunset"

### 3. 缓存策略
- 热门视频：缓存 1 小时
- 搜索结果：缓存 30 分钟
- 随机视频：缓存 20 分钟
- 合理利用缓存可以减少 API 调用

### 4. 错误处理
组件包含完善的错误处理机制：
- **401 错误**: API 密钥无效
- **429 错误**: 请求频率过高
- **网络错误**: 连接失败

### 5. 最佳实践

#### 选择合适的视频质量
```javascript
// 根据使用场景选择不同质量
// 移动端预览：选择 small 或 medium
// 桌面端显示：选择 large 或 原始质量
// 4K 显示：设置 min_width 为 3840
```

#### 优化搜索关键词
```javascript
// 良好的搜索关键词示例
"nature landscape"    // 自然风景
"ocean waves slow"    // 慢镜头海浪
"city lights night"   // 城市夜景
"abstract motion"     // 抽象动效
```

#### 合理使用随机功能
```javascript
// 随机视频适用场景：
// 1. 背景素材轮播
// 2. 创意灵感获取
// 3. 素材库预览
// 4. 随机推荐功能
```

## 🔧 故障排除

### 常见问题

#### 1. API 密钥无效
**错误信息**: "API 密钥无效，请检查您的 Pexels API 密钥"
**解决方案**:
- 检查 API 密钥是否正确复制
- 确认 API 密钥没有额外的空格
- 验证 Pexels 账户状态是否正常

#### 2. 请求频率过高
**错误信息**: "API 请求频率过高，请稍后再试"
**解决方案**:
- 等待一段时间后重试
- 利用组件的缓存机制
- 合理控制请求频率

#### 3. 搜索结果为空
**可能原因**:
- 搜索关键词过于具体
- 筛选条件过于严格
- 网络连接问题

**解决方案**:
- 尝试更通用的关键词
- 放宽筛选条件
- 检查网络连接

#### 4. 视频加载失败
**可能原因**:
- 视频文件链接过期
- 网络连接不稳定
- 视频文件过大

**解决方案**:
- 重新获取视频链接
- 选择较小尺寸的视频
- 检查网络带宽

## 📝 开发注意事项

### 1. API 限制
- Pexels API 有请求频率限制
- 建议合理使用缓存机制
- 避免过于频繁的 API 调用

### 2. 视频版权
- Pexels 视频均为免费使用
- 建议在应用中注明视频来源
- 遵守 Pexels 的使用条款

### 3. 性能优化
- 根据实际需要选择视频质量
- 使用预览功能减少带宽消耗
- 合理设置缓存时间

## 📚 相关资源

- [Pexels 官网](https://www.pexels.com)
- [Pexels API 文档](https://www.pexels.com/api/documentation/)
- [Pexels 许可证](https://www.pexels.com/license/)
- [ForwardWidget 开发指南](./ForwardWidget_Development_Guide.md)

---

> 本组件遵循 ForwardWidget 框架规范，提供完整的错误处理、缓存机制和数据转换功能。