# Pexels动态壁纸 ForwardWidget

🎬 基于Pexels API的高质量动态壁纸组件，支持随机获取、内容搜索和多种自定义选项。

## ✨ 功能特性

- **🔐 API配置界面**: 内置美观的API密钥配置界面
- **🎲 随机壁纸**: 从Pexels获取随机优质视频壁纸
- **🔍 智能搜索**: 支持关键词搜索特定内容的动态壁纸
- **🔥 热门推荐**: 获取当前热门和精选视频壁纸
- **⚙️ 多种选项**: 支持视频质量、方向、时长等自定义设置
- **📦 智能缓存**: 30分钟缓存机制，提升性能减少API调用
- **🎨 现代UI**: 符合FWD开发规范的现代化界面设计
- **📱 响应式**: 支持各种设备和屏幕尺寸

## 📋 系统要求

- ForwardWidget框架 >= 0.0.1
- 现代浏览器（支持ES6+）
- Pexels API密钥（免费）

## 🚀 快速开始

### 1. 获取Pexels API密钥

1. 访问 [Pexels API](https://www.pexels.com/api/)
2. 免费注册账户
3. 创建新应用获取API密钥

### 2. 安装组件

将 `wallpaper-widget.js` 文件放置到ForwardWidget的组件目录中。

### 3. 配置API密钥

1. 在ForwardWidget中加载组件
2. 选择"API配置"模块
3. 输入您的Pexels API密钥
4. 点击"测试连接"验证密钥
5. 保存配置

### 4. 开始使用

配置完成后，您可以使用以下模块：

- **随机壁纸**: 获取随机优质视频壁纸
- **搜索壁纸**: 根据关键词搜索特定内容
- **热门壁纸**: 获取当前热门视频壁纸

## 📖 详细使用指南

### 随机壁纸模块

获取随机的高质量视频壁纸：

**参数配置:**
- **视频质量**: 高清(HD) / 标清(SD) / 原质量
- **方向**: 横向 / 纵向 / 正方形  
- **时长范围**: 短视频(<30s) / 中等(30s-2min) / 长视频(>2min) / 全部

**使用场景:**
- 桌面壁纸随机化
- 应用背景动态切换
- 创意灵感获取

### 搜索壁纸模块

根据关键词搜索特定内容的动态壁纸：

**参数配置:**
- **搜索关键词**: 如 ocean, forest, city, sunset 等
- **页码**: 1-50
- **每页数量**: 5/10/15/20个

**搜索技巧:**
- 使用英文关键词效果更佳
- 可以组合多个关键词，如 "ocean sunset"
- 支持分类搜索：nature, urban, abstract, animals 等

### 热门壁纸模块

获取当前热门的动态壁纸：

**分类选项:**
- **最受欢迎**: 基于用户喜好的热门视频
- **最新上传**: 最近上传的优质内容
- **精选推荐**: Pexels编辑精心挑选的内容

## 🛠️ 技术架构

### 核心组件

- **WallpaperConfig**: 全局配置和状态管理
- **PexelsApiClient**: Pexels API客户端封装
- **VideoUtils**: 视频处理和格式化工具

### 缓存机制

组件实现了智能缓存机制：
- 缓存时间: 30分钟
- 存储方式: 内存Map存储
- 缓存键: 基于API请求URL
- 自动清理: 超时自动失效

### 错误处理

完善的错误处理机制：
- API密钥验证
- 网络错误处理
- 数据格式验证
- 用户友好的错误提示

## 📊 API响应格式

组件返回的壁纸数据格式：

```javascript
{
  id: "123456",
  type: "video",
  title: "视频壁纸 - 1920x1080",
  description: "by John Doe",
  coverUrl: "https://images.pexels.com/...",
  videoUrl: "https://videos.pexels.com/...",
  duration: 45,
  width: 1920,
  height: 1080,
  tags: ["nature", "ocean"],
  photographer: "John Doe",
  photographerUrl: "https://pexels.com/...",
  source: "Pexels",
  sourceUrl: "https://pexels.com/video/..."
}
```

## ⚡ 性能优化

### 缓存策略
- 30分钟本地缓存减少API调用
- 基于URL的智能缓存键
- 内存缓存避免重复请求

### 请求优化
- 合理的请求参数设置
- 错误重试机制
- 请求超时处理

### 数据处理
- 视频质量智能选择
- 时长过滤优化
- 数据格式标准化

## 🔧 配置选项

### 默认配置

```javascript
const WallpaperConfig = {
  apiKey: null,
  baseUrl: "https://api.pexels.com/videos",
  defaultParams: {
    per_page: 10,
    orientation: "landscape"
  },
  cacheExpiry: 30 * 60 * 1000 // 30分钟
};
```

### 自定义配置

您可以通过修改配置来适应不同需求：

- **cacheExpiry**: 调整缓存时间
- **defaultParams**: 修改默认请求参数
- **baseUrl**: 更改API端点（如果需要）

## 📱 响应式设计

组件UI完全响应式，支持：
- 桌面端 (1200px+)
- 平板端 (768px-1199px)  
- 移动端 (<768px)

## 🛡️ 安全考虑

- **API密钥安全**: 本地存储，不会发送到第三方
- **输入验证**: 严格的参数验证和过滤
- **错误处理**: 避免敏感信息泄露
- **HTTPS**: 所有API请求通过HTTPS

## 🧪 测试用例

### 基本功能测试

1. **API配置测试**
   - 有效密钥验证
   - 无效密钥处理
   - 网络错误处理

2. **随机壁纸测试**
   - 不同质量设置
   - 不同方向设置
   - 时长过滤功能

3. **搜索功能测试**
   - 有效关键词搜索
   - 无结果处理
   - 分页功能

### 性能测试

- 缓存命中率测试
- API响应时间测试
- 内存使用优化测试

## 🔍 故障排除

### 常见问题

**1. API密钥无效**
- 确认密钥正确复制
- 检查Pexels账户状态
- 验证API使用配额

**2. 无法加载视频**
- 检查网络连接
- 确认视频URL有效性
- 尝试更换视频质量设置

**3. 搜索无结果**
- 尝试更通用的关键词
- 检查关键词拼写
- 使用英文关键词

**4. 缓存问题**
- 清理浏览器缓存
- 调用clearCache()函数
- 重新加载组件

### 调试技巧

启用调试模式：

```javascript
// 在浏览器控制台中
console.log(getConfigStatus());
clearCache();
```

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 开发环境设置

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送分支
5. 创建Pull Request

### 代码规范

- 使用ES6+语法
- 遵循ForwardWidget开发规范
- 添加必要的注释和文档
- 确保错误处理完整

## 📞 支持与反馈

- **GitHub Issues**: 报告Bug或功能请求
- **文档更新**: 提交文档改进建议
- **社区交流**: 加入ForwardWidget开发者社区

## 🚗 路线图

### v2.1.0 (计划中)
- [ ] 添加视频下载功能
- [ ] 支持自定义视频过滤条件
- [ ] 增加收藏夹功能

### v2.2.0 (规划中)
- [ ] 多API源支持
- [ ] 离线模式
- [ ] 高级搜索功能

---

**感谢使用Pexels动态壁纸ForwardWidget！** 🎉

如果这个组件对您有帮助，请给我们一个⭐️ Star！